---
id: '15'
lezione: "20231116"
title: "Network Security"
author: "Sam. K."
keywords: 
---

<style>
    strong{
        background-color:#faf43e;
        color: black;
        padding:0.1rem 0.2rem;
        border-radius:5px;
    }
</style>

# Network security 2 - Attack

arp - request/reply
viene attacco il protocollo arp, è un proto che serve per comunica in un lan, usto per recuperare physical address dato ip address, 
prot di rete lvl 2 1 control se quel ip è ddentro questa rete,
arp cache è una tab con ip -> mac, se lo trova prende mac addres e contruisce il pacchetto di lvl 2, e invia, 
altrimenti se nn trfova mac address, fa un (in broadcast) arp request sulla rete lan, 
chiedendo se qualcuno ha quel ip, se qualcuno ha uel ip manda un reply con il mac address

sfruttando il protocollo arp, si puo fare un attacco mitm man in the middle
## arp poisoning

attaccante si intromette tra source e destination
nel ambito di una lan

usato per intercettazione

arp cache viene aggiornato periodicamente, le entry della tab hanno una durata di qualche sec. 
è pensato , ogni volta che ricevo un pacchetto, aggiorno la cache,
arp si basa sul fatto che si fida di tutti

arp è un prot stateless, non ha memoria, 
## arp sppofing
convincere un host A a mandare il pacc C invece di B

questo si fa mandando delle reply "gratuiti" senza che è stato una rihiesta

attaccante dice, ip della vittma ha il suo mac address

arp -a mostra la tab di entry

quest attacco bisogna farlo ogni 40s


i tool
hunt, ettercap

mitm effects

sniffing
dos
tcp/ip session hijacking

si puo modificare pacchetti, quindi ,leggere e ri-iniettare

le riechiste non sono tracciate, non autenticate, macchine si fidano traa di loro,

esiste anche arp announcement

unica difesa è quello di usare entry statiche,
il arp cache viene caricat con  un file di configurazione.

in contesti dinamici questo nn puo essere fatto.

attacco di livello 2


## dos ddos

denial of service

bloccare un utente dal usare un servizio di rete
è basato sul far esaurire una risorsa/servizio
connettività/banda

bisogna chiedersi quale risorsa/ andare a far esaurire/bloccare

un esemipo di dos a livello host
~~~c
while true{
    fork();
}
~~~

in queto caso si va esaurire la tabella dei processi

tipi di dos


smurf attack nn funziona piu
consiste nel ripetere pacchetti ping
come fa a gen ping?
si prende un pacchetto ip, coem source si mette l'indirizzo della vittima, come destination addd si mette tutti host di una rete gigante

soluzione: quando trova un ddestination address di tipo broadcast lo viene scartato

Syn flood
che va a saturare la tab di connessioni di un host

client dve dimostrare che ha ricevuto sync x con ack x+1

qundo server quando riceve ack cancella la entry nella

questo viene utilizzato per fare un attacc od tipo ddos

cominci generare una serie di syn, server mi manda syn ack ma io nn li mando syn ack, cosi satura latabella di server

syn flood

per evitare quest osi bisognerebbe modificare protoc tcp che è  "impossibile"

ddos distributed dos vengono usate delle bot net

## TCP Hikacking

attacco di kavin mitnick

alla base di quest attacco ce il 3-way handshake
tcp session hijack

è un attacco mitm a livello tcp (4)

ho due host a e b, voglio che a parli con me e io mando dati di A a b

dirotto i dati da A verso C da C verso B

b riconosce A attrwaverso il numero ack

per far credere a B che il pacchetto arriva da A, il pacchetto deve avere, ipA,portA,x+B
per fare l'attacc odevo conoscere l'x


quando un tcp è valido, quando addres,port,seq num sono validi

rsh remote shell

rsh ip_address shell_cmd

il file etc/hosts.equiv contiene gli ip autorizzati per rmeote shell
altrimenti si controlla il file .rhosts

attacco
 l'attaccante impersona il trusted server, 
 mitnick usa cmd finger (usato per conoscere info su persone, e diceva anche che una persona se era collegato ad un pc)
 showmount -e S's ip address dice tutti ip che hanno trust con quella macchina 

 rsh riceve sulla porta 53

 deve cercare di capire il seq num, è un num casuale, quindi cerca di capire l'algortimo
 manda tot syn requests, e la vittima rispodne con syn ack

 vuole capire y che manda la vittima al rusted server (della figura di prof)
mitnick capisce che algoritmo è un algo determinativo

send 20 syn packet to S

e poi fa un syn flood T

cosi T va fuori uso
adesso manda un syn alla porta 53 senza comando

adesso S risponde con un syn ack al T

mitnick manda unapaccheto a S con ipT,port 53, un numero casuale X
S risponde a T con syn ack, source ip S, dest ip T, X+1 Y
S si aspetta un pacchetto di ACk source ip T, dest ip T, y+1
tutto consiste nel indovinare y+1

una volta loggato fa questo echo ++ > rhost sovrascrive il rhosts con ++
questo vuol dire che tutto il mondo è trustable

soluzione per fermare? hanno ottimizzato i generatori di numeri casuali 

spoofing dos, e rhost