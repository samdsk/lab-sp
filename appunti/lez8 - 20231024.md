---
id: '8'
lezione: "20231024"
title: "Playing with assembly"
author: "Sam. Kaluwaduge"
keywords: 
---
<style>
    strong{
        background-color:#faf43e;
        color: black;
        padding:0.1rem 0.2rem;
        border-radius:5px;
    }
</style>

## Materiale

# Playing with assembly - parte 2

## funzioni in assebmyl

godbolt.org, compiler explorer
    leggi una linea da stdin, scrivi in stdout


    call print(int,int)


    mov rax, 60  # sys_exit
    xor rdi,rdi
    syscall
    ret

    xor rax, rax sysread
    mov rdi,0
    mov rsi,r8
    mov 



https://syscalls64.paolostivanin.com/


    .intel_syntax noprefix                                          
    .global _start

    .section .text
    _start:

    lea rdi,buffer
    mov rsi,64
    call Read
    lea rdi,buffer
    mov rsi,64
    call Write
    call Exit

    Read:

    mov r8,rdi
    mov r9,rsi


    mov rsi,r8
    mov rdi, 0
    mov rdx, r9
    mov rax, 0
    syscall
    ret

    Write:
    mov r8,rdi
    mov r9,rsi

    mov rsi,r8
    mov rax,1
    mov rdi,1
    mov rdx,r9
    syscall
    ret

    Exit:
    mov rax,60
    xor rdi,rdi
    syscall

    .section .data
    buffer: .space 64

strace stampa le syscalls per debug 

set disassembly-flavor intel // per settare il formato intel
info functions // stampa le funzioni del programma
disass _print // _print Ã¨ label della funzione
layout asm // avviare in mod asmmebly live
layout reg

x/s 0x4000 // x per vedere cosa ce dentro un indirizzo, /s string, indirizzo, oppure registro, 7x per hex
si // step 

darkdust.net 
https://darkdust.net/files/GDB%20Cheat%20Sheet.pdf


  1 .intel_syntax noprefix
  2 .global _start
  3 .section .text                                                                   
  4 _start:       
  5               
  6     lea rbx,buffer
  7     mov rdx,10
  8     mov rcx,20
  9     add rdx,rcx
 10     mov rdi,2 
 11     mov [rbx],rdx
 12     mov rsi,rbx
 13     call Print
 14               
 15               
 16 Print: #Print(size,buffer)
 17     mov r8,rdi
 18     mov rax,1 
 19     mov rdi,1 
 20     mov rdx,r8
 21     syscall   
 22     ret       
 23               
 24               
 25 .section .data
 26 buffer: .space 100


 scrivere un programma assembly ch date due variabile numeriche embedded nel programma ne sstampa la somma